<ion-header [translucent]="true">
  <ion-toolbar class="custom-header">
    <ion-buttons slot="start">
      <ion-button (click)="cancel_click()">
        <ion-icon slot="icon-only" name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title mode="md">
      <ion-icon name="locate-outline" style="margin-right: 8px;"></ion-icon>
      {{ viewModel.id ? 'Update Snipe' : 'Add Snipe' }}
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="edit-snipe-content">
  <div class="header-banner" *ngIf="viewModel.title">
    <div class="item-preview">
      <h2 class="item-title">{{ viewModel.title }}</h2>
      <div class="item-details" *ngIf="viewModel.currentPrice">
        <span class="current-price">Current: {{ viewModel.currentPrice | number: '1.2-2' }}</span>
      </div>
    </div>
  </div>

  <form novalidate class="snipe-form">
    <ion-grid class="form-grid">
      <ion-row>
        <ion-col size="12">
          <ion-card class="form-card">
            <ion-card-header>
              <ion-card-title>
                Item Details
              </ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <ion-item class="form-item">
                <ion-label position="stacked">Item Number *</ion-label>
                <ion-input
                  type="text"
                  [readonly]="!viewModel.manualEntry"
                  [(ngModel)]="viewModel.itemNumber"
                  name="itemNumber"
                  placeholder="Enter eBay item number"
                  required>
                </ion-input>
              </ion-item>

              <ion-item class="form-item" *ngIf="viewModel.currentPrice">
                <ion-label>Current Price</ion-label>
                <ion-note slot="end">{{ viewModel.currentPrice | number: '1.2-2' }}</ion-note>
              </ion-item>
            </ion-card-content>
          </ion-card>
        </ion-col>

        <ion-col size="12">
          <ion-card class="form-card">
            <ion-card-header>
              <ion-card-title>
                Bid Settings
              </ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <ion-item class="form-item">
                <ion-label position="stacked">Lead Time (seconds) *</ion-label>
                <ion-input
                  type="number"
                  placeholder="2-120 seconds"
                  [(ngModel)]="viewModel.leadTime"
                  name="leadTime"
                  min="2"
                  max="120"
                  required>
                </ion-input>
              </ion-item>

              <ion-item class="form-item">
                <ion-label position="stacked">Maximum Bid *</ion-label>
                <ion-input
                  type="number"
                  placeholder="Enter maximum bid amount"
                  [(ngModel)]="viewModel.maximumBid"
                  name="maximumBid"
                  step="0.01"
                  required>
                </ion-input>
              </ion-item>
            </ion-card-content>
          </ion-card>
        </ion-col>

        <ion-col size="12">
          <ion-card class="form-card advanced-settings">
            <ion-card-header>
              <ion-card-title>
                Advanced Settings
              </ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <ion-item class="form-item second-shot-row">
                <ion-label>Second Shot Bids</ion-label>
                <ion-select
                  [(ngModel)]="viewModel.bidEnhancement"
                  name="bidEnhancement"
                  interface="action-sheet">
                  <ion-select-option value="0">None</ion-select-option>
                  <ion-select-option value="2">2 Bid Increments</ion-select-option>
                  <ion-select-option value="3">3 Bid Increments</ion-select-option>
                  <ion-select-option value="4">4 Bid Increments</ion-select-option>
                  <ion-select-option value="5">5 Bid Increments</ion-select-option>
                  <ion-select-option value="6">6 Bid Increments</ion-select-option>
                </ion-select>
                <ion-icon name="help-circle-outline" color="primary"
                  slot="end"
                  style="cursor:pointer"
                  (click)="secondShotHelpIcon_click()">
                </ion-icon>
              </ion-item>

              <ion-item class="form-item" *ngIf="viewModel.showAddShippingInsurance">
                <ion-checkbox
                  [(ngModel)]="viewModel.addShippingInsurance"
                  name="addShippingInsurance">
                </ion-checkbox>
                <ion-label>Add Shipping Insurance</ion-label>
              </ion-item>

              <ion-item class="form-item" *ngIf="viewModel.showAddComment">
                <ion-label position="stacked">Comment</ion-label>
                <ion-input
                  type="text"
                  placeholder="Add a comment (optional)"
                  [(ngModel)]="viewModel.comment"
                  name="comment">
                </ion-input>
              </ion-item>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>

    <div class="action-buttons">
      <ion-button expand="block" (click)="addSnipe_click()" class="submit-button">
        <ion-icon name="checkmark-circle-outline" slot="start"></ion-icon>
        {{ viewModel.id ? "Update Snipe" : "Add Snipe" }}
      </ion-button>
      <ion-button expand="block" color="light" fill="outline" (click)="cancel_click()" class="cancel-button">
        <ion-icon name="close-circle-outline" slot="start"></ion-icon>
        Cancel
      </ion-button>
    </div>
  </form>
</ion-content>
  