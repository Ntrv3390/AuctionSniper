<ion-header [translucent]="true">
  <ion-toolbar class="custom-header">
    <ion-buttons slot="start">
      <ion-button
        fill="clear"
        (click)="back_click()"
        *ngIf="viewModel.showBackButton"
      >
        <!-- Back Arrow (white) -->
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="white"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
      </ion-button>
    </ion-buttons>
    <ion-title mode="md">{{ viewModel.promptText }}</ion-title>
    <ion-buttons slot="end">
      <ion-button fill="clear" (click)="close_click()">
        <ion-icon name="close-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="pin-entry-modern">
  <!-- PIN Display -->
  <div class="pin-display" [class.landscape]="isLandscape">
    <div class="pin-dash-wrapper" *ngFor="let i of [0,1,2,3]">
      <!-- Dot appears on top when user types -->
      <div class="pin-dot" [class.filled]="viewModel.pin.length > i"></div>
      <!-- Static dash below -->
      <div class="pin-dash">-</div>
    </div>
  </div>

  <!-- Numpad Drawer -->
  <div class="pin-numpad" [class.landscape]="isLandscape">
    <ion-grid>
      <ion-row *ngFor="let row of [[1,2,3],[4,5,6],[7,8,9],[null,0,'clear']]">
        <ion-col size="4" *ngFor="let val of row">
          <ng-container *ngIf="val !== null">
            <ion-button
              expand="block"
              fill="clear"
              class="pin-key"
              (click)="val === 'clear' ? clear_click() : number_click(val)"
            >
              <ng-container *ngIf="val === 'clear'">
                <!-- SVG Close Icon -->
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="28"
                  height="28"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="#fff"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <circle cx="12" cy="12" r="10"></circle>
                  <line x1="15" y1="9" x2="9" y2="15"></line>
                  <line x1="9" y1="9" x2="15" y2="15"></line>
                </svg>
              </ng-container>
              <ng-container *ngIf="val !== 'clear'">{{ val }}</ng-container>
            </ion-button>
          </ng-container>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
</ion-content>
