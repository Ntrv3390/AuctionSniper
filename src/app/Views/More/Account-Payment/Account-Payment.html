<ion-header [translucent]="true">
  <ion-toolbar class="custom-header">
    <ion-title mode="md">Payment</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="account-payment-content">
  <div class="page-header">
    <div class="header-icon">
      <ion-icon name="card-outline"></ion-icon>
    </div>
    <h1>Account Payment</h1>
    <p class="subtitle">Manage your balance and payment methods</p>
  </div>

  <!-- Error loading panel -->
  <div
    class="load-error-container"
    style="margin-top: 50px"
    *ngIf="viewModel.showError"
  >
    <app-icon-panel
      [text]="'Unexpected error; please try again.'"
      [icon]="'rainy-outline'"
      [iconSize]="170"
    >
    </app-icon-panel>
    <div class="button-container">
      <ion-button
        expand="block"
        color="primary"
        fill="outline"
        (click)="retry_click()"
      >
        Try Again
      </ion-button>
    </div>
  </div>

  <ng-container *ngIf="!viewModel.showError">
    <ion-card class="balance-card">
      <ion-card-header>
        <ion-card-title>Account Balance</ion-card-title>
        <ion-card-subtitle>Your current financial status</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <div class="balance-item">
          <div class="balance-label">Pre-Paid Balance</div>
          <div class="balance-amount">
            {{ viewModel.paymentInfo.Balance | currency }}
          </div>
        </div>
        <div class="balance-item">
          <div class="balance-label">Free Credits</div>
          <div class="balance-amount">{{ viewModel.paymentInfo.Credits }}</div>
        </div>
        <div class="balance-item highlight">
          <div class="balance-label">Total Unpaid</div>
          <div class="balance-amount">
            {{ (viewModel.paymentInfo.UnpaidWinSnipesTotal +
            viewModel.paymentInfo.UnpaidShippingInsuranceTotal +
            viewModel.paymentInfo.UnpaidInvoicesTotal) | currency }}
          </div>
        </div>
      </ion-card-content>
    </ion-card>

    <ion-card class="payment-methods-card">
      <ion-card-header>
        <ion-card-title>Payment Methods</ion-card-title>
        <ion-card-subtitle
          >Choose how to add funds to your account</ion-card-subtitle
        >
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <ion-item (click)="payWithPayPal_click()" detail="true" button>
            <ion-icon name="logo-paypal" slot="start"></ion-icon>
            <ion-label>
              <h3>PayPal</h3>
              <p>Quick and secure payments with PayPal</p>
            </ion-label>
          </ion-item>
          <ion-item
            (click)="viewAccountInformation_click()"
            detail="true"
            button
          >
            <ion-icon name="card-outline" slot="start"></ion-icon>
            <ion-label>
              <h3>Credit Card</h3>
              <p>Manage your saved credit cards</p>
            </ion-label>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>

    <ion-card class="details-card">
      <ion-card-content>
        <ion-button
          expand="block"
          fill="outline"
          (click)="viewPricingDetails_click()"
        >
          <ion-icon name="information-circle-outline" slot="start"></ion-icon>
          View Pricing Details
        </ion-button>
      </ion-card-content>
    </ion-card>
  </ng-container>
</ion-content>
